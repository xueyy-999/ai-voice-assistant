# 🔑 快速更换 API Key 指南

**问题**: 当前 API Key 余额不足  
**解决**: 更换新的 API Key（30秒搞定）

---

## 🚀 方法1: 获取新的免费 API Key（推荐）

### 步骤1: 注册新账号
1. 访问: https://platform.deepseek.com/
2. 使用不同的邮箱或手机号注册新账号
3. 登录后进入"API Keys"页面

### 步骤2: 创建 API Key
1. 点击"创建新密钥"
2. 复制生成的 Key（格式: `sk-xxxxx`）

### 步骤3: 更新配置文件
```bash
# 1. 打开后端环境配置
notepad backend\.env

# 2. 找到这一行：
DEEPSEEK_API_KEY=sk-0c2339164b1b4865a5f1d6f28320f6a1

# 3. 替换为新的 Key：
DEEPSEEK_API_KEY=sk-你的新Key

# 4. 保存并关闭（Ctrl+S）
```

### 步骤4: 重启后端
```bash
# 关闭后端窗口
# 重新运行
快速启动.bat
```

---

## 🎯 方法2: 使用其他免费大模型（备选）

如果不想注册新账号，可以换成其他免费 API：

### 选项A: 使用 OpenAI 兼容的其他服务
```env
DEEPSEEK_API_KEY=你的其他Key
DEEPSEEK_BASE_URL=https://其他服务的地址
```

### 选项B: 完全不用 LLM（简化模式）
```env
# 直接留空或删除这行
DEEPSEEK_API_KEY=
```

**简化模式功能**:
- ✅ "打开记事本" - 可用
- ✅ "搜索Python" - 可用  
- ✅ "播放音乐" - 可用
- ✅ "准备工作" - 可用
- ✅ "你好" - 可用（已加兜底）
- ❌ 复杂对话 - 不可用

---

## 📝 完整操作流程

### 如果你已经有新的 API Key：

1️⃣ **打开配置文件**
```bash
notepad backend\.env
```

2️⃣ **替换这一行**
```env
DEEPSEEK_API_KEY=sk-你的新Key
```

3️⃣ **保存退出**（Ctrl+S）

4️⃣ **关闭后端窗口**

5️⃣ **重新启动**
```bash
快速启动.bat
```

6️⃣ **验证**
后端日志应该显示：
```
🤖 AI Agent: READY (LangChain)  ← 看到这个就成功了
```

---

## 🔍 如何确认切换成功？

### 测试1: 检查后端日志
```
✅ 成功: 看到 "AI Agent: READY (LangChain)"
❌ 失败: 看到 "AI Agent: SIMPLE MODE"
```

### 测试2: 发送复杂指令
```
输入: "你好，你能做什么？"
✅ 成功: AI详细回复功能列表
❌ 失败: 返回简单提示或无回复
```

---

## 💡 DeepSeek 免费额度说明

- 新注册用户: 500万 tokens
- 每次对话大约消耗: 100-500 tokens
- 理论可用: 1-5 万次对话
- 到期时间: 通常30天

**如果频繁用完**，建议：
1. 注册2-3个账号备用
2. 切换到简化模式（不用API）
3. 考虑付费充值

---

## ❓ 如果还是不行？

### 情况1: 更换后仍报错
```
检查: API Key 是否正确复制（没有多余空格）
检查: 网络是否正常（能否访问 deepseek.com）
```

### 情况2: 后端启动报错
```
检查: .env 文件格式是否正确（一行一个配置）
检查: 没有中文引号或特殊字符
```

---

## 🎉 快速测试清单

更换 Key 后，测试这些功能：

```
✅ "你好" → AI友好回复
✅ "打开记事本" → 记事本打开
✅ "帮我搜索Python教程" → 浏览器搜索
✅ "播放音乐" → 音乐播放
✅ "准备工作" → 场景执行
```

---

**现在你可以:**
1. 提供新的 API Key（我帮你写入配置）
2. 或者按上面步骤自己操作

**提供格式**: 直接发 `sk-xxxxxx` 即可

