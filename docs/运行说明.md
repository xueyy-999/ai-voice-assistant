# VoicePC 运行说明

## 快速开始

### 1. 环境要求
- Windows 10/11
- Python 3.10+
- Node.js 18+
- 8GB+ RAM

### 2. 安装依赖

#### 后端依赖
```bash
cd backend
pip install -r requirements.txt
```

#### 前端依赖
```bash
cd frontend
npm install
```

### 3. 配置 API Keys（可选）

在 `backend/` 目录创建 `.env` 文件：
```env
# DeepSeek API（可选，提供更智能的 AI 能力）
DEEPSEEK_API_KEY=sk-xxxxx

# 阿里云语音服务（可选，提供更好的语音识别）
ALI_APPKEY=xxxxx
ALI_ACCESS_KEY=xxxxx
ALI_SECRET_KEY=xxxxx
```

**注意**：不配置 API Key 也可运行，系统会使用简化模式。

### 4. 启动服务

#### 方式一：使用快速启动脚本
双击运行 `快速启动.bat`

#### 方式二：手动启动

**启动后端**（终端1）：
```bash
cd backend
python app/main.py
```

**启动前端**（终端2）：
```bash
cd frontend
npm run dev -- --port 5174
```

### 5. 访问应用
打开浏览器访问：http://localhost:5174

## 功能使用

### 基础语音命令
- "打开记事本"
- "打开计算器"
- "创建一个文件"
- "搜索天气"
- "设置音量为50"
- "截图"

### 复杂场景
- "准备工作模式"（打开浏览器、记事本、文件管理器）
- "创作模式"（打开写作工具、播放背景音乐）
- "学习模式"（打开学习资源、记事本）
- "休闲模式"（打开音乐、调低音量）

### 使用技巧
1. 按住麦克风按钮说话，松开自动识别
2. 支持连续对话，会记住上下文
3. 右侧可查看 AI 执行步骤
4. 系统会语音播报执行结果

## 常见问题

### Q: 语音识别不工作？
A: 检查麦克风权限，浏览器需要允许麦克风访问。

### Q: 后端启动失败？
A: 确保 8000 端口未被占用，可修改 `backend/.env` 中的 `APP_PORT`。

### Q: 前端无法连接后端？
A: 确保后端服务已启动，检查防火墙设置。

### Q: 如何添加新的工具？
A: 在 `backend/app/tools/` 创建新工具类，继承 `BaseTool`。

## 开发调试

### 查看日志
- 后端日志：`backend/logs/voicepc.log`
- 前端日志：浏览器开发者工具

### API 文档
后端启动后访问：http://localhost:8000/docs

### 测试工具
```bash
# 测试健康检查
curl http://localhost:8000/health

# 测试工具列表
curl http://localhost:8000/api/task/tools
```

## 性能优化

1. **减少延迟**
   - 使用本地 Edge-TTS 替代云端服务
   - 启用 WebSocket 保持长连接

2. **提升准确率**
   - 配置 DeepSeek API 获得更好的意图理解
   - 使用阿里云语音服务提升识别准确率

3. **系统资源**
   - 关闭不需要的后台服务
   - 使用 SSD 提升文件操作速度

## 安全提示

1. 系统会阻止危险操作（如删除系统文件）
2. 建议在虚拟机中测试未知命令
3. 定期备份重要数据
4. 不要在生产环境运行

---

如有其他问题，请查看项目 README 或提交 Issue。
