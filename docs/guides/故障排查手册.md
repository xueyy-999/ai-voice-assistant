# ğŸ”§ VoicePC æ•…éšœæ’æŸ¥æ‰‹å†Œ

æœ¬æ‰‹å†Œå¸®åŠ©æ‚¨å¿«é€Ÿå®šä½å’Œè§£å†³VoicePCä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€‚

---

## ğŸ¯ å¿«é€Ÿè¯Šæ–­

### é—®é¢˜ç±»åˆ«é€ŸæŸ¥
- [å¯åŠ¨é—®é¢˜](#å¯åŠ¨é—®é¢˜) - æœåŠ¡æ— æ³•å¯åŠ¨
- [è¯­éŸ³é—®é¢˜](#è¯­éŸ³é—®é¢˜) - å½•éŸ³ã€è¯†åˆ«ç›¸å…³
- [åŠŸèƒ½é—®é¢˜](#åŠŸèƒ½é—®é¢˜) - å‘½ä»¤æ‰§è¡Œå¤±è´¥
- [æ€§èƒ½é—®é¢˜](#æ€§èƒ½é—®é¢˜) - è¿è¡Œç¼“æ…¢ã€å¡é¡¿
- [ç½‘ç»œé—®é¢˜](#ç½‘ç»œé—®é¢˜) - è¿æ¥ã€APIç›¸å…³

---

## ğŸš€ å¯åŠ¨é—®é¢˜

### 1. åç«¯æ— æ³•å¯åŠ¨

#### ç—‡çŠ¶
```
ModuleNotFoundError: No module named 'xxx'
```

#### è§£å†³æ–¹æ¡ˆ
```bash
# é‡æ–°å®‰è£…ä¾èµ–
cd backend
pip install -r requirements.txt

# å¦‚æœè¿˜å¤±è´¥ï¼Œå°è¯•
pip install -r requirements.txt --upgrade --force-reinstall
```

---

#### ç—‡çŠ¶
```
Port 8000 is already in use
```

#### è§£å†³æ–¹æ¡ˆ
```bash
# Windows
netstat -ano | findstr :8000
taskkill /PID <è¿›ç¨‹ID> /F

# æˆ–ä¿®æ”¹ç«¯å£
# ç¼–è¾‘ backend/app/config.py
PORT = 8001  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

---

### 2. å‰ç«¯æ— æ³•å¯åŠ¨

#### ç—‡çŠ¶
```
npm: æ— æ³•å°†"npm"é¡¹è¯†åˆ«ä¸º cmdlet
```

#### è§£å†³æ–¹æ¡ˆ
1. ä¸‹è½½å®‰è£…Node.js: https://nodejs.org/
2. é‡å¯å‘½ä»¤è¡Œ
3. éªŒè¯å®‰è£…: `node --version`

---

#### ç—‡çŠ¶
```
Port 5174 is already in use
```

#### è§£å†³æ–¹æ¡ˆ
```bash
# æ–¹æ³•1: æ€æ­»å ç”¨è¿›ç¨‹
npx kill-port 5174

# æ–¹æ³•2: ä½¿ç”¨å…¶ä»–ç«¯å£
npm run dev -- --port 5175
```

---

### 3. Pythonç‰ˆæœ¬é—®é¢˜

#### ç—‡çŠ¶
```
ERROR: Could not find a version that satisfies the requirement
```

#### è§£å†³æ–¹æ¡ˆ
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦ 3.11+

# å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œå®‰è£…æ–°ç‰ˆæœ¬
# ä¸‹è½½: https://www.python.org/downloads/
```

---

## ğŸ¤ è¯­éŸ³é—®é¢˜

### 1. éº¦å…‹é£æ— æ³•ä½¿ç”¨

#### æ£€æŸ¥æ¸…å•
- [ ] æµè§ˆå™¨æ˜¯å¦æˆäºˆéº¦å…‹é£æƒé™
- [ ] Windowsç³»ç»Ÿæ˜¯å¦å…è®¸åº”ç”¨è®¿é—®éº¦å…‹é£
- [ ] éº¦å…‹é£è®¾å¤‡æ˜¯å¦æ­£å¸¸å·¥ä½œ
- [ ] éº¦å…‹é£æ˜¯å¦è¢«å…¶ä»–åº”ç”¨å ç”¨

#### è¯¦ç»†æ­¥éª¤

**1. æµè§ˆå™¨æƒé™**
```
Chrome: è®¾ç½® â†’ éšç§å’Œå®‰å…¨ â†’ ç½‘ç«™è®¾ç½® â†’ éº¦å…‹é£
Edge: è®¾ç½® â†’ Cookieå’Œç½‘ç«™æƒé™ â†’ éº¦å…‹é£
```
ç¡®ä¿ localhost æœ‰æƒé™

**2. Windowsè®¾ç½®**
```
è®¾ç½® â†’ éšç§ â†’ éº¦å…‹é£ â†’ å…è®¸åº”ç”¨è®¿é—®éº¦å…‹é£
```

**3. æµ‹è¯•éº¦å…‹é£**
```
è®¾ç½® â†’ ç³»ç»Ÿ â†’ å£°éŸ³ â†’ è¾“å…¥ â†’ æµ‹è¯•éº¦å…‹é£
```

---

### 2. è¯­éŸ³è¯†åˆ«ä¸å‡†ç¡®

#### åŸå› åˆ†æ
| åŸå›  | å½±å“ç¨‹åº¦ | è§£å†³æ–¹æ¡ˆ |
|------|---------|----------|
| ç¯å¢ƒå™ªéŸ³å¤§ | â­â­â­ | æ¢å®‰é™ç¯å¢ƒ |
| å£éŸ³é‡ | â­â­ | å°½é‡æ ‡å‡†æ™®é€šè¯ |
| ç½‘ç»œå»¶è¿Ÿ | â­â­â­ | æ£€æŸ¥ç½‘ç»œ |
| APIé…é¢ç”¨å®Œ | â­â­â­ | æ›´æ¢API Key |

#### ä¼˜åŒ–å»ºè®®
```
âœ… éº¦å…‹é£è·ç¦»: 20-30cm
âœ… è¯­é€Ÿ: é€‚ä¸­åæ…¢
âœ… éŸ³é‡: æ­£å¸¸è¯´è¯éŸ³é‡
âœ… ç¯å¢ƒ: å®‰é™æˆ¿é—´
```

---

### 3. è¯­éŸ³åˆæˆæ— å£°éŸ³

#### æ£€æŸ¥æ­¥éª¤
1. **éŸ³é‡è®¾ç½®**
   - Windowsç³»ç»ŸéŸ³é‡ > 0
   - æµè§ˆå™¨æœªé™éŸ³
   - éŸ³ç®±/è€³æœºå·²è¿æ¥

2. **æœåŠ¡çŠ¶æ€**
   ```bash
   # æŸ¥çœ‹TTSæœåŠ¡æ—¥å¿—
   # åº”è¯¥çœ‹åˆ° "âœ… TTSæœåŠ¡åˆå§‹åŒ–æˆåŠŸ"
   ```

3. **éŸ³é¢‘æ ¼å¼**
   - æµè§ˆå™¨æ˜¯å¦æ”¯æŒMP3
   - å°è¯•åˆ‡æ¢éŸ³é¢‘æ ¼å¼

---

## âš™ï¸ åŠŸèƒ½é—®é¢˜

### 1. åº”ç”¨æ— æ³•æ‰“å¼€

#### è°ƒè¯•æ­¥éª¤

**Step 1: ç¡®è®¤åº”ç”¨å·²å®‰è£…**
```bash
# æŸ¥çœ‹åº”ç”¨åˆ—è¡¨
python -c "from app.tools.app_control import AppControlTool; tool = AppControlTool(); print(tool.list_apps())"
```

**Step 2: æ£€æŸ¥åº”ç”¨åç§°**
| æ­£ç¡® âœ… | é”™è¯¯ âŒ |
|---------|---------|
| "å¾®ä¿¡" | "WeChat" |
| "Chrome" | "è°·æ­Œæµè§ˆå™¨" |
| "è®°äº‹æœ¬" | "Notepad" |

**Step 3: æ‰‹åŠ¨æµ‹è¯•**
```python
from app.tools.app_control import AppControlTool
tool = AppControlTool()
result = tool.open_app("å¾®ä¿¡")
print(result)
```

---

### 2. æ–‡ä»¶æ“ä½œå¤±è´¥

#### å¸¸è§é”™è¯¯

**æƒé™ä¸è¶³**
```
PermissionError: Access denied
```
è§£å†³: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ

**è·¯å¾„ä¸å­˜åœ¨**
```
FileNotFoundError: path not found
```
è§£å†³: ä½¿ç”¨ç»å¯¹è·¯å¾„

**æ–‡ä»¶è¢«å ç”¨**
```
PermissionError: being used by another process
```
è§£å†³: å…³é—­å ç”¨ç¨‹åº

---

### 3. æµè§ˆå™¨æ§åˆ¶å¤±æ•ˆ

#### è¯Šæ–­æ–¹æ³•

1. **æ£€æŸ¥æµè§ˆå™¨è¿›ç¨‹**
   ```bash
   tasklist | findstr chrome
   ```

2. **æµ‹è¯•WebDriver**
   ```python
   from selenium import webdriver
   driver = webdriver.Chrome()
   driver.get("https://www.baidu.com")
   ```

3. **æ›´æ–°ChromeDriver**
   - ä¸‹è½½: https://chromedriver.chromium.org/
   - ç¡®ä¿ç‰ˆæœ¬åŒ¹é…Chromeç‰ˆæœ¬

---

## ğŸŒ æ€§èƒ½é—®é¢˜

### 1. å“åº”æ…¢

#### æ€§èƒ½åˆ†æ

**æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡**
```bash
# è®¿é—®ç›‘æ§ç«¯ç‚¹
curl http://localhost:8000/api/monitor/stats
```

**é¢„æœŸå€¼**:
| æŒ‡æ ‡ | æ­£å¸¸å€¼ | è­¦æˆ’å€¼ |
|------|--------|--------|
| STTå»¶è¿Ÿ | < 1s | > 2s |
| LLMå“åº” | < 2s | > 5s |
| å·¥å…·æ‰§è¡Œ | < 1s | > 3s |

#### ä¼˜åŒ–æ–¹æ¡ˆ

**1. éŸ³é¢‘å¤„ç†ä¼˜åŒ–**
```python
# backend/app/services/voice/audio_processor.py
CHUNK_SIZE = 2048  # å·²ä¼˜åŒ–ï¼Œæ— éœ€ä¿®æ”¹
```

**2. ç¼“å­˜ä¼˜åŒ–**
```python
# å¯ç”¨ç»“æœç¼“å­˜
ENABLE_CACHE = True
CACHE_TTL = 3600
```

**3. å¹¶å‘é™åˆ¶**
```python
# é™åˆ¶å¹¶å‘è¯·æ±‚
MAX_CONCURRENT = 10
```

---

### 2. å†…å­˜å ç”¨é«˜

#### è¯Šæ–­å‘½ä»¤
```bash
# Windows
tasklist | findstr python

# æŸ¥çœ‹è¯¦ç»†å†…å­˜
wmic process where name="python.exe" get ProcessId,WorkingSetSize
```

#### è§£å†³æ–¹æ¡ˆ

**1. æ¸…ç†ç¼“å­˜**
```python
# å®šæœŸæ¸…ç†
python -c "from app.services.ai.context_manager import context_mgr; context_mgr.clear()"
```

**2. é™åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦**
```python
# backend/app/services/ai/context_manager.py
CONTEXT_MAX_HISTORY = 5  # é™ä½åˆ°5è½®
```

**3. é‡å¯æœåŠ¡**
```bash
# æ¯éš”ä¸€æ®µæ—¶é—´é‡å¯
```

---

### 3. CPUå ç”¨é«˜

#### æ’æŸ¥æ­¥éª¤

1. **è¯†åˆ«è€—æ—¶æ“ä½œ**
   ```bash
   # æŸ¥çœ‹æ—¥å¿—ä¸­çš„æ…¢è¯·æ±‚
   # â±ï¸ æ…¢è¯·æ±‚å‘Šè­¦: xxx è€—æ—¶ x.xxs
   ```

2. **ä¼˜åŒ–éŸ³é¢‘å¤„ç†**
   - ä½¿ç”¨GPUåŠ é€Ÿï¼ˆå¯é€‰ï¼‰
   - é™ä½é‡‡æ ·ç‡
   - å‡å°‘éŸ³é¢‘å¤„ç†æ­¥éª¤

3. **é™åˆ¶å¹¶å‘**
   ```python
   MAX_CONCURRENT_REQUESTS = 5  # é™ä½å¹¶å‘
   ```

---

## ğŸŒ ç½‘ç»œé—®é¢˜

### 1. APIè¿æ¥å¤±è´¥

#### DeepSeek API

**ç—‡çŠ¶**
```
ERROR: Failed to connect to DeepSeek API
```

**æ£€æŸ¥æ¸…å•**
- [ ] API Keyæ˜¯å¦æ­£ç¡®
- [ ] ç½‘ç»œæ˜¯å¦é€šç•…
- [ ] APIé…é¢æ˜¯å¦ç”¨å®Œ
- [ ] APIæœåŠ¡æ˜¯å¦æ­£å¸¸

**æµ‹è¯•è¿æ¥**
```bash
curl -X POST https://api.deepseek.com/v1/chat/completions \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"model": "deepseek-chat", "messages": [{"role": "user", "content": "hello"}]}'
```

---

### 2. WebSocketæ–­å¼€

#### ç—‡çŠ¶
```
WebSocket connection closed
```

#### è§£å†³æ–¹æ¡ˆ

**1. å¢åŠ å¿ƒè·³é—´éš”**
```python
# backend/app/api/chat.py
heartbeat_interval = 60  # ä»30ç§’å¢åŠ åˆ°60ç§’
```

**2. è‡ªåŠ¨é‡è¿**
å‰ç«¯ä¼šè‡ªåŠ¨é‡è¿ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†

**3. æ£€æŸ¥é˜²ç«å¢™**
ç¡®ä¿8000ç«¯å£æœªè¢«é˜²ç«å¢™é˜»æ­¢

---

### 3. GitHub Pushå¤±è´¥

#### ç—‡çŠ¶
```
fatal: unable to access 'https://github.com/...'
Connection was reset
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ³•1: é‡è¯•**
```bash
git push origin main
```

**æ–¹æ³•2: ä½¿ç”¨ä»£ç†**
```bash
git config --global http.proxy http://127.0.0.1:7890
```

**æ–¹æ³•3: ä½¿ç”¨SSH**
```bash
git remote set-url origin git@github.com:username/repo.git
git push origin main
```

---

## ğŸ” æ—¥å¿—åˆ†æ

### æŸ¥çœ‹æ—¥å¿—ä½ç½®

**åç«¯æ—¥å¿—**
```
backend/logs/app.log
```

**å‰ç«¯æ—¥å¿—**
```
æµè§ˆå™¨æ§åˆ¶å° (F12)
```

### æ—¥å¿—çº§åˆ«

| çº§åˆ« | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|
| DEBUG | è°ƒè¯•ä¿¡æ¯ | è¯¦ç»†æ‰§è¡Œæµç¨‹ |
| INFO | ä¸€èˆ¬ä¿¡æ¯ | è¯·æ±‚å¤„ç†å®Œæˆ |
| WARNING | è­¦å‘Š | æ…¢è¯·æ±‚ã€é«˜CPU |
| ERROR | é”™è¯¯ | APIè°ƒç”¨å¤±è´¥ |
| CRITICAL | ä¸¥é‡é”™è¯¯ | æœåŠ¡å´©æºƒ |

### å¸¸è§æ—¥å¿—æ¨¡å¼

**æ­£å¸¸è¯·æ±‚**
```
ğŸ“Š POST /api/voice/recognize | Status: 200 | Time: 0.856s
```

**æ…¢è¯·æ±‚**
```
â±ï¸ æ…¢è¯·æ±‚å‘Šè­¦: POST /api/chat/message è€—æ—¶ 3.24s
```

**é”™è¯¯**
```
âŒ POST /api/tools/execute | Error: PermissionError | Time: 0.123s
```

---

## ğŸ“ è·å–æ”¯æŒ

### è‡ªåŠ©èµ„æº
1. ğŸ“– [ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹](./ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹.md)
2. â“ [å¸¸è§é—®é¢˜FAQ](../../å¸¸è§é—®é¢˜FAQ.md)
3. ğŸ“ [è¿è¡Œè¯´æ˜](../è¿è¡Œè¯´æ˜.md)

### æäº¤é—®é¢˜
å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³ï¼Œè¯·æäº¤Issueï¼š
- GitHub: https://github.com/xueyy-999/ai-voice-assistant/issues
- åŒ…å«: é”™è¯¯ä¿¡æ¯ã€æ—¥å¿—æˆªå›¾ã€ç³»ç»Ÿä¿¡æ¯

---

## âœ… é¢„é˜²æªæ–½

### å®šæœŸç»´æŠ¤
- ğŸ“… æ¯å‘¨é‡å¯æœåŠ¡ä¸€æ¬¡
- ğŸ—‘ï¸ æ¯æœˆæ¸…ç†æ—¥å¿—å’Œç¼“å­˜
- ğŸ”„ åŠæ—¶æ›´æ–°ä¾èµ–åŒ…

### æœ€ä½³å®è·µ
- âœ… ä¿æŒç½‘ç»œç¨³å®š
- âœ… ä½¿ç”¨æ¨èé…ç½®
- âœ… å®šæœŸå¤‡ä»½æ•°æ®
- âœ… å…³æ³¨é¡¹ç›®æ›´æ–°

---

**ç¥æ‚¨ä½¿ç”¨é¡ºç•…ï¼** ğŸ‰

